var We=Object.create;var V=Object.defineProperty;var je=Object.getOwnPropertyDescriptor;var Ve=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Je=(e,t)=>{for(var r in t)V(e,r,{get:t[r],enumerable:!0})},Xe=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ve(t))!Ye.call(e,i)&&i!==r&&V(e,i,{get:()=>t[i],enumerable:!(a=je(t,i))||a.enumerable});return e};var Ke=(e,t,r)=>(r=e!=null?We(qe(e)):{},Xe(t||!e||!e.__esModule?V(r,"default",{value:e,enumerable:!0}):r,e));var ue=Ge(()=>{});var $={};Je($,{createEndpoint:()=>D,expose:()=>x,finalizer:()=>R,proxy:()=>U,proxyMarker:()=>Y,releaseProxy:()=>ie,transfer:()=>ce,transferHandlers:()=>w,windowEndpoint:()=>ot,wrap:()=>H});var Y=Symbol("Comlink.proxy"),D=Symbol("Comlink.endpoint"),ie=Symbol("Comlink.releaseProxy"),R=Symbol("Comlink.finalizer"),A=Symbol("Comlink.thrown"),oe=e=>typeof e=="object"&&e!==null||typeof e=="function",Qe={canHandle:e=>oe(e)&&e[Y],serialize(e){let{port1:t,port2:r}=new MessageChannel;return x(e,t),[r,[r]]},deserialize(e){return e.start(),H(e)}},Ze={canHandle:e=>oe(e)&&A in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},w=new Map([["proxy",Qe],["throw",Ze]]);function et(e,t){for(let r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function x(e,t=globalThis,r=["*"]){t.addEventListener("message",function a(i){if(!i||!i.data)return;if(!et(r,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}let{id:n,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(E),c;try{let u=s.slice(0,-1).reduce((d,p)=>d[p],e),m=s.reduce((d,p)=>d[p],e);switch(o){case"GET":c=m;break;case"SET":u[s.slice(-1)[0]]=E(i.data.value),c=!0;break;case"APPLY":c=m.apply(u,l);break;case"CONSTRUCT":{let d=new m(...l);c=U(d)}break;case"ENDPOINT":{let{port1:d,port2:p}=new MessageChannel;x(e,p),c=ce(d,[d])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[A]:0}}Promise.resolve(c).catch(u=>({value:u,[A]:0})).then(u=>{let[m,d]=M(u);t.postMessage(Object.assign(Object.assign({},m),{id:n}),d),o==="RELEASE"&&(t.removeEventListener("message",a),ae(t),R in e&&typeof e[R]=="function"&&e[R]())}).catch(u=>{let[m,d]=M({value:new TypeError("Unserializable return value"),[A]:0});t.postMessage(Object.assign(Object.assign({},m),{id:n}),d)})}),t.start&&t.start()}function tt(e){return e.constructor.name==="MessagePort"}function ae(e){tt(e)&&e.close()}function H(e,t){return q(e,[],t)}function L(e){if(e)throw new Error("Proxy has been released and is not useable")}function se(e){return O(e,{type:"RELEASE"}).then(()=>{ae(e)})}var I=new WeakMap,N="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(I.get(e)||0)-1;I.set(e,t),t===0&&se(e)});function rt(e,t){let r=(I.get(t)||0)+1;I.set(t,r),N&&N.register(e,t,e)}function nt(e){N&&N.unregister(e)}function q(e,t=[],r=function(){}){let a=!1,i=new Proxy(r,{get(n,o){if(L(a),o===ie)return()=>{nt(i),se(e),a=!0};if(o==="then"){if(t.length===0)return{then:()=>i};let s=O(e,{type:"GET",path:t.map(l=>l.toString())}).then(E);return s.then.bind(s)}return q(e,[...t,o])},set(n,o,s){L(a);let[l,c]=M(s);return O(e,{type:"SET",path:[...t,o].map(u=>u.toString()),value:l},c).then(E)},apply(n,o,s){L(a);let l=t[t.length-1];if(l===D)return O(e,{type:"ENDPOINT"}).then(E);if(l==="bind")return q(e,t.slice(0,-1));let[c,u]=ne(s);return O(e,{type:"APPLY",path:t.map(m=>m.toString()),argumentList:c},u).then(E)},construct(n,o){L(a);let[s,l]=ne(o);return O(e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:s},l).then(E)}});return rt(i,e),i}function it(e){return Array.prototype.concat.apply([],e)}function ne(e){let t=e.map(M);return[t.map(r=>r[0]),it(t.map(r=>r[1]))]}var le=new WeakMap;function ce(e,t){return le.set(e,t),e}function U(e){return Object.assign(e,{[Y]:!0})}function ot(e,t=globalThis,r="*"){return{postMessage:(a,i)=>e.postMessage(a,r,i),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function M(e){for(let[t,r]of w)if(r.canHandle(e)){let[a,i]=r.serialize(e);return[{type:"HANDLER",name:t,value:a},i]}return[{type:"RAW",value:e},le.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return w.get(e.name).deserialize(e.value);case"RAW":return e.value}}function O(e,t,r){return new Promise(a=>{let i=at();e.addEventListener("message",function n(o){!o.data||!o.data.id||o.data.id!==i||(e.removeEventListener("message",n),a(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r)})}function at(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var st=Object.defineProperty,f=(e,t)=>st(e,"name",{value:t,configurable:!0}),me=(e=>typeof v<"u"?v:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof v<"u"?v:t)[r]}):e)(function(e){if(typeof v<"u")return v.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});function pe(e){return!isNaN(parseFloat(e))&&isFinite(e)}f(pe,"_isNumber");function h(e){return e.charAt(0).toUpperCase()+e.substring(1)}f(h,"_capitalize");function j(e){return function(){return this[e]}}f(j,"_getter");var T=["isConstructor","isEval","isNative","isToplevel"],C=["columnNumber","lineNumber"],F=["fileName","functionName","source"],lt=["args"],ct=["evalOrigin"],B=T.concat(C,F,lt,ct);function y(e){if(e)for(var t=0;t<B.length;t++)e[B[t]]!==void 0&&this["set"+h(B[t])](e[B[t]])}f(y,"StackFrame");y.prototype={getArgs:function(){return this.args},setArgs:function(e){if(Object.prototype.toString.call(e)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof y)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new y(e);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",a=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:a?a+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}};y.fromString=f(function(e){var t=e.indexOf("("),r=e.lastIndexOf(")"),a=e.substring(0,t),i=e.substring(t+1,r).split(","),n=e.substring(r+1);if(n.indexOf("@")===0)var o=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n,""),s=o[1],l=o[2],c=o[3];return new y({functionName:a,args:i||void 0,fileName:s,lineNumber:l||void 0,columnNumber:c||void 0})},"StackFrame$$fromString");for(b=0;b<T.length;b++)y.prototype["get"+h(T[b])]=j(T[b]),y.prototype["set"+h(T[b])]=function(e){return function(t){this[e]=!!t}}(T[b]);var b;for(P=0;P<C.length;P++)y.prototype["get"+h(C[P])]=j(C[P]),y.prototype["set"+h(C[P])]=function(e){return function(t){if(!pe(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(C[P]);var P;for(k=0;k<F.length;k++)y.prototype["get"+h(F[k])]=j(F[k]),y.prototype["set"+h(F[k])]=function(e){return function(t){this[e]=String(t)}}(F[k]);var k,G=y;function ye(){var e=/^\s*at .*(\S+:\d+|\(native\))/m,t=/^(eval@)?(\[native code])?$/;return{parse:f(function(r){if(r.stack&&r.stack.match(e))return this.parseV8OrIE(r);if(r.stack)return this.parseFFOrSafari(r);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:f(function(r){if(r.indexOf(":")===-1)return[r];var a=/(.+?)(?::(\d+))?(?::(\d+))?$/,i=a.exec(r.replace(/[()]/g,""));return[i[1],i[2]||void 0,i[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:f(function(r){var a=r.stack.split(`
`).filter(function(i){return!!i.match(e)},this);return a.map(function(i){i.indexOf("(eval ")>-1&&(i=i.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var n=i.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),o=n.match(/ (\(.+\)$)/);n=o?n.replace(o[0],""):n;var s=this.extractLocation(o?o[1]:n),l=o&&n||void 0,c=["eval","<anonymous>"].indexOf(s[0])>-1?void 0:s[0];return new G({functionName:l,fileName:c,lineNumber:s[1],columnNumber:s[2],source:i})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:f(function(r){var a=r.stack.split(`
`).filter(function(i){return!i.match(t)},this);return a.map(function(i){if(i.indexOf(" > eval")>-1&&(i=i.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),i.indexOf("@")===-1&&i.indexOf(":")===-1)return new G({functionName:i});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=i.match(n),s=o&&o[1]?o[1]:void 0,l=this.extractLocation(i.replace(n,""));return new G({functionName:s,fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:i})},this)},"ErrorStackParser$$parseFFOrSafari")}}f(ye,"ErrorStackParser");var ut=new ye,ft=ut,g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!process.browser,ge=g&&typeof module<"u"&&typeof module.exports<"u"&&typeof me<"u"&&typeof __dirname<"u",dt=g&&!ge,St=typeof globalThis.Bun<"u",mt=typeof Deno<"u",we=!g&&!mt,pt=we&&typeof window=="object"&&typeof document=="object"&&typeof document.createElement=="function"&&"sessionStorage"in window&&typeof importScripts!="function",yt=we&&typeof importScripts=="function"&&typeof self=="object",Ot=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1,he,J,ve,fe,K;async function Q(){if(!g||(he=(await import("node:url")).default,fe=await import("node:fs"),K=await import("node:fs/promises"),ve=(await import("node:vm")).default,J=await import("node:path"),Z=J.sep,typeof me<"u"))return;let e=fe,t=await import("node:crypto"),r=await Promise.resolve().then(()=>Ke(ue(),1)),a=await import("node:child_process"),i={fs:e,crypto:t,ws:r,child_process:a};globalThis.require=function(n){return i[n]}}f(Q,"initNodeModules");function Ee(e,t){return J.resolve(t||".",e)}f(Ee,"node_resolvePath");function xe(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}f(xe,"browser_resolvePath");var X;g?X=Ee:X=xe;var Z;g||(Z="/");function be(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:fetch(e)}:{binary:K.readFile(e).then(r=>new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}}f(be,"node_getBinaryResponse");function Pe(e,t){let r=new URL(e,location);return{response:fetch(r,t?{integrity:t}:{})}}f(Pe,"browser_getBinaryResponse");var W;g?W=be:W=Pe;async function ke(e,t){let{response:r,binary:a}=W(e,t);if(a)return a;let i=await r;if(!i.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await i.arrayBuffer())}f(ke,"loadBinaryFile");var z;if(pt)z=f(async e=>await import(e),"loadScript");else if(yt)z=f(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(g)z=Se;else throw new Error("Cannot determine runtime environment");async function Se(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?ve.runInThisContext(await(await fetch(e)).text()):await import(he.pathToFileURL(e).href)}f(Se,"nodeLoadScript");async function Oe(e){if(g){await Q();let t=await K.readFile(e,{encoding:"utf8"});return JSON.parse(t)}else return await(await fetch(e)).json()}f(Oe,"loadLockFile");async function Te(){if(ge)return __dirname;let e;try{throw new Error}catch(a){e=a}let t=ft.parse(e)[0].fileName;if(g&&!t.startsWith("file://")&&(t=`file://${t}`),dt){let a=await import("node:path");return(await import("node:url")).fileURLToPath(a.dirname(t))}let r=t.lastIndexOf(Z);if(r===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,r)}f(Te,"calculateDirname");function Ce(e){let t=e.FS,r=e.FS.filesystems.MEMFS,a=e.PATH,i={DIR_MODE:16895,FILE_MODE:33279,mount:function(n){if(!n.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return r.mount.apply(null,arguments)},syncfs:async(n,o,s)=>{try{let l=i.getLocalSet(n),c=await i.getRemoteSet(n),u=o?c:l,m=o?l:c;await i.reconcile(n,u,m),s(null)}catch(l){s(l)}},getLocalSet:n=>{let o=Object.create(null);function s(u){return u!=="."&&u!==".."}f(s,"isRealDir");function l(u){return m=>a.join2(u,m)}f(l,"toAbsolute");let c=t.readdir(n.mountpoint).filter(s).map(l(n.mountpoint));for(;c.length;){let u=c.pop(),m=t.stat(u);t.isDir(m.mode)&&c.push.apply(c,t.readdir(u).filter(s).map(l(u))),o[u]={timestamp:m.mtime,mode:m.mode}}return{type:"local",entries:o}},getRemoteSet:async n=>{let o=Object.create(null),s=await gt(n.opts.fileSystemHandle);for(let[l,c]of s)l!=="."&&(o[a.join2(n.mountpoint,l)]={timestamp:c.kind==="file"?(await c.getFile()).lastModifiedDate:new Date,mode:c.kind==="file"?i.FILE_MODE:i.DIR_MODE});return{type:"remote",entries:o,handles:s}},loadLocalEntry:n=>{let o=t.lookupPath(n).node,s=t.stat(n);if(t.isDir(s.mode))return{timestamp:s.mtime,mode:s.mode};if(t.isFile(s.mode))return o.contents=r.getFileDataAsTypedArray(o),{timestamp:s.mtime,mode:s.mode,contents:o.contents};throw new Error("node type not supported")},storeLocalEntry:(n,o)=>{if(t.isDir(o.mode))t.mkdirTree(n,o.mode);else if(t.isFile(o.mode))t.writeFile(n,o.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(n,o.mode),t.utime(n,o.timestamp,o.timestamp)},removeLocalEntry:n=>{var o=t.stat(n);t.isDir(o.mode)?t.rmdir(n):t.isFile(o.mode)&&t.unlink(n)},loadRemoteEntry:async n=>{if(n.kind==="file"){let o=await n.getFile();return{contents:new Uint8Array(await o.arrayBuffer()),mode:i.FILE_MODE,timestamp:o.lastModifiedDate}}else{if(n.kind==="directory")return{mode:i.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+n.kind)}},storeRemoteEntry:async(n,o,s)=>{let l=n.get(a.dirname(o)),c=t.isFile(s.mode)?await l.getFileHandle(a.basename(o),{create:!0}):await l.getDirectoryHandle(a.basename(o),{create:!0});if(c.kind==="file"){let u=await c.createWritable();await u.write(s.contents),await u.close()}n.set(o,c)},removeRemoteEntry:async(n,o)=>{await n.get(a.dirname(o)).removeEntry(a.basename(o)),n.delete(o)},reconcile:async(n,o,s)=>{let l=0,c=[];Object.keys(o.entries).forEach(function(d){let p=o.entries[d],S=s.entries[d];(!S||t.isFile(p.mode)&&p.timestamp.getTime()>S.timestamp.getTime())&&(c.push(d),l++)}),c.sort();let u=[];if(Object.keys(s.entries).forEach(function(d){o.entries[d]||(u.push(d),l++)}),u.sort().reverse(),!l)return;let m=o.type==="remote"?o.handles:s.handles;for(let d of c){let p=a.normalize(d.replace(n.mountpoint,"/")).substring(1);if(s.type==="local"){let S=m.get(p),ze=await i.loadRemoteEntry(S);i.storeLocalEntry(d,ze)}else{let S=i.loadLocalEntry(d);await i.storeRemoteEntry(m,p,S)}}for(let d of u)if(s.type==="local")i.removeLocalEntry(d);else{let p=a.normalize(d.replace(n.mountpoint,"/")).substring(1);await i.removeRemoteEntry(m,p)}}};e.FS.filesystems.NATIVEFS_ASYNC=i}f(Ce,"initializeNativeFS");var gt=f(async e=>{let t=[];async function r(i){for await(let n of i.values())t.push(n),n.kind==="directory"&&await r(n)}f(r,"collect"),await r(e);let a=new Map;a.set(".",e);for(let i of t){let n=(await e.resolve(i)).join("/");a.set(n,i)}return a},"getFsHandles");function Fe(e){let t={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Ie(e),quit(r,a){throw t.exited={status:r,toThrow:a},a},print:e.stdout,printErr:e.stderr,arguments:e.args,API:{config:e},locateFile:r=>e.indexURL+r,instantiateWasm:Ne(e.indexURL)};return t}f(Fe,"createSettings");function _e(e){return function(t){let r="/";try{t.FS.mkdirTree(e)}catch(a){console.error(`Error occurred while making a home directory '${e}':`),console.error(a),console.error(`Using '${r}' for a home directory instead`),e=r}t.FS.chdir(e)}}f(_e,"createHomeDirectory");function Le(e){return function(t){Object.assign(t.ENV,e)}}f(Le,"setEnvironment");function Re(e){return t=>{for(let r of e)t.FS.mkdirTree(r),t.FS.mount(t.FS.filesystems.NODEFS,{root:r},r)}}f(Re,"mountLocalDirectories");function Ae(e){let t=ke(e);return r=>{let a=r._py_version_major(),i=r._py_version_minor();r.FS.mkdirTree("/lib"),r.FS.mkdirTree(`/lib/python${a}.${i}/site-packages`),r.addRunDependency("install-stdlib"),t.then(n=>{r.FS.writeFile(`/lib/python${a}${i}.zip`,n)}).catch(n=>{console.error("Error occurred while installing the standard library:"),console.error(n)}).finally(()=>{r.removeRunDependency("install-stdlib")})}}f(Ae,"installStdlib");function Ie(e){let t;return e.stdLibURL!=null?t=e.stdLibURL:t=e.indexURL+"python_stdlib.zip",[Ae(t),_e(e.env.HOME),Le(e.env),Re(e._node_mounts),Ce]}f(Ie,"getFileSystemInitializationFuncs");function Ne(e){let{binary:t,response:r}=W(e+"pyodide.asm.wasm");return function(a,i){return async function(){try{let n;r?n=await WebAssembly.instantiateStreaming(r,a):n=await WebAssembly.instantiate(await t,a);let{instance:o,module:s}=n;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,s)),i(o,s)}catch(n){console.warn("wasm instantiation failed!"),console.warn(n)}}(),{}}}f(Ne,"getInstantiateWasmFunc");var de="0.27.0";async function ee(e={}){var t,r;await Q();let a=e.indexURL||await Te();a=X(a),a.endsWith("/")||(a+="/"),e.indexURL=a;let i={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:a+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:a,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0,BUILD_ID:"8f254d3346bd62b9d3eb64ff47e12c292072a672346cdf144e38e4e3f6572e16"},n=Object.assign(i,e);(t=n.env).HOME??(t.HOME="/home/pyodide"),(r=n.env).PYTHONINSPECT??(r.PYTHONINSPECT="1");let o=Fe(n),s=o.API;if(s.lockFilePromise=Oe(n.lockFileURL),typeof _createPyodideModule!="function"){let d=`${n.indexURL}pyodide.asm.js`;await z(d)}let l;if(e._loadSnapshot){let d=await e._loadSnapshot;ArrayBuffer.isView(d)?l=d:l=new Uint8Array(d),o.noInitialRun=!0,o.INITIAL_MEMORY=l.length}let c=await _createPyodideModule(o);if(o.exited)throw o.exited.toThrow;if(e.pyproxyToStringRepr&&s.setPyProxyToStringMethod(!0),s.version!==de&&n.checkAPIVersion)throw new Error(`Pyodide version does not match: '${de}' <==> '${s.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);c.locateFile=d=>{throw new Error("Didn't expect to load any more file_packager files!")};let u;l&&(u=s.restoreSnapshot(l));let m=s.finalizeBootstrap(u,e._snapshotDeserializer);return s.sys.path.insert(0,s.config.env.HOME),m.version.includes("dev")||s.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${m.version}/full/`),s._pyodide.set_excepthook(),await s.packageIndexReady,s.initializeStreams(n.stdin,n.stdout,n.stderr),m}f(ee,"loadPyodide");function te(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function _(e,t,r,...a){return e==null||te(e)||e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e:t(e)?r(e,...a):Array.isArray(e)?e.map(i=>_(i,t,r,...a)):typeof e=="object"?Object.fromEntries(Object.entries(e).map(([i,n])=>[i,_(n,t,r,...a)])):e}function wt(e){return e&&e[Symbol.toStringTag]=="PyProxy"}function Me(e){return e&&!!e[D]}function ht(e){return e&&typeof e=="object"&&"_comlinkProxy"in e&&"ptr"in e}function vt(e){return e&&e[Symbol.toStringTag]=="Map"}function re(e){if(Me(e))return!0;if(e==null||e instanceof ArrayBuffer||ArrayBuffer.isView(e))return!1;if(e instanceof Array)return e.some(t=>re(t));if(typeof e=="object")return Object.entries(e).some(([t,r])=>re(r))}var De={},He={canHandle:wt,serialize(e){let t=self.pyodide._module.PyProxy_getPtr(e);De[t]=e;let{port1:r,port2:a}=new MessageChannel;return x(e,r),[[a,t],[a]]},deserialize([e,t]){e.start();let r=H(e);return new Proxy(r,{get:(i,n)=>n==="_ptr"?t:i[n]})}},Ue={canHandle:re,serialize(e){return[_(e,Me,t=>({_comlinkProxy:!0,ptr:t._ptr})),[]]},deserialize(e){return _(e,ht,t=>De[t.ptr])}},$e={canHandle:te,serialize(e){if(e.width==0&&e.height==0){let t=new OffscreenCanvas(1,1);t.getContext("2d"),e=t.transferToImageBitmap()}return[e,[e]]},deserialize(e){return e}},Be={canHandle:vt,serialize(e){return[Object.fromEntries(e.entries()),[]]},deserialize(e){return e}};var Et={mkdir(e){self.pyodide._FS.mkdir(e)},writeFile(e,t){self.pyodide._FS.writeFile(e,t)}};async function xt(e){return self.pyodide=await ee(e),self.pyodide.registerComlink($),self.pyodide._FS=self.pyodide.FS,self.pyodide.FS=Et,w.set("PyProxy",He),w.set("Comlink",Ue),w.set("ImageBitmap",$e),w.set("Map",Be),U(self.pyodide)}x({init:xt});
/*! Bundled license information:

comlink/dist/esm/comlink.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
