<!DOCTYPE html>
<html lang="en"><head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-99fa6729ad23987aafeada22b1565191.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.43">

  <title>Programming in Python for Data Science – More plotting tricks using Altair</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #383a42;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #383a42; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #50a14f; } /* Annotation */
    code span.at { color: #a626a4; } /* Attribute */
    code span.bn { color: #986801; } /* BaseN */
    code span.bu { color: #a626a4; } /* BuiltIn */
    code span.cf { color: #a626a4; } /* ControlFlow */
    code span.ch { color: #50a14f; } /* Char */
    code span.cn { color: #986801; } /* Constant */
    code span.co { color: #a0a1a7; font-style: italic; } /* Comment */
    code span.cv { color: #e45649; font-style: italic; } /* CommentVar */
    code span.do { color: #e45649; } /* Documentation */
    code span.dt { color: #a626a4; } /* DataType */
    code span.dv { color: #986801; } /* DecVal */
    code span.er { color: #f44747; text-decoration: underline; } /* Error */
    code span.ex { color: #4078f2; font-weight: bold; } /* Extension */
    code span.fl { color: #986801; } /* Float */
    code span.fu { color: #4078f2; } /* Function */
    code span.im { color: #50a14f; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #a626a4; } /* Keyword */
    code span.op { color: #a626a4; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #a626a4; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #0184bc; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #50a14f; } /* String */
    code span.va { color: #e45649; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto-f9a839800513c4e4cd53100bfd03d6eb.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-notes="" class="quarto-title-block center">
  <h1 class="title">More plotting tricks using Altair</h1>

<div class="quarto-title-authors">
</div>

</section>
<section class="slide level2">

<div id="22b8530e" class="cell" data-inlcude="false" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a>cereal <span class="op">=</span> pd.read_csv(<span class="st">'data/cereal.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5336defa" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb2-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a aria-hidden="true" tabindex="-1"></a>chart0 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_circle().encode(</span>
<span id="cb2-4"><a aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'mfr'</span>, </span>
<span id="cb2-5"><a aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'calories'</span></span>
<span id="cb2-6"><a aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Scatter plot of manufacturer calorie content"</span>)</span>
<span id="cb2-7"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a aria-hidden="true" tabindex="-1"></a>chart0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart0.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Let’s build on the Altair skills we learned in the previous module.</p>
<p>At this point, we are familiar with writing basic plotting code similar to what is shown here.</p>
<p>However, it’s important that we start specifying what kind of variable type we use for our <code>x</code> and <code>y</code> values with the <code>encode(..)</code> verb.</p>
<p>Before, Altair would guess what type of data it was plotting. Usually it’s pretty smart and guesses correctly like we saw in our previous plots, but unfortunately this is not always the case.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="3c976b12" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a>chart1 <span class="op">=</span> alt.Chart(cereal_modified, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_circle().encode(</span>
<span id="cb3-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span><span class="st">'mfr'</span>, </span>
<span id="cb3-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span><span class="st">'calories'</span></span>
<span id="cb3-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Scatter plot of manufacturer calorie content"</span>)</span>
<span id="cb3-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a aria-hidden="true" tabindex="-1"></a>chart1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart1.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Let’s see an example where <code>Altair</code> fails to determine the correct data type.</p>
<p>For this example, we have modified the <code>calories</code> column in the <code>cereal</code> dataframe.</p>
<p>We will now generate a scatter plot of <code>mfr</code> and <code>calories</code> from this modified cereal dataset.</p>
<p>Notice how 150 comes before 100 on the y-axis? It seems we have a problem here, which is due to Altair failing to recognize that <code>calories</code> is a numerical type.</p>
<p>Even Altair can’t always get it right every time, which is why it’s so important we specify the data type when plotting.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="8654c119" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a aria-hidden="true" tabindex="-1"></a>chart2 <span class="op">=</span> alt.Chart(cereal_modified, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_circle().encode(</span>
<span id="cb4-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span><span class="st">'mfr:N'</span>, </span>
<span id="cb4-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span><span class="st">'calories:Q'</span></span>
<span id="cb4-4"><a aria-hidden="true" tabindex="-1"></a>                  ).properties(title<span class="op">=</span><span class="st">"Scatter plot of manufacturer calorie content"</span>)</span>
<span id="cb4-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a aria-hidden="true" tabindex="-1"></a>chart2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart2.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>We can help Altair by giving it clear instructions on what type of columns our x and y values are.</p>
<p>In this case we are going to specify <code>N</code> for the <em>nominal</em> column <code>mfr</code> and <code>Q</code> for the <em>quantitative</em> column <code>calories</code>.</p>
<p>That’s better!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<table class="caption-top">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Data Type</th>
<th>Shorthand Code</th>
<th>Description</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ordinal</td>
<td><code>O</code></td>
<td>a discrete ordered quantity</td>
<td>“dislike”, “neutral”, “like”</td>
</tr>
<tr class="even">
<td>Nominal</td>
<td><code>N</code></td>
<td>a discrete un-ordered quantity</td>
<td>eye color, postal code, university</td>
</tr>
<tr class="odd">
<td>Quantitative</td>
<td><code>Q</code></td>
<td>a continuous quantity</td>
<td>5, 5.0, 5.011</td>
</tr>
<tr class="even">
<td>Temporal</td>
<td><code>T</code></td>
<td>a time or date value</td>
<td>date (August 13 2020), time (12:00 pm)</td>
</tr>
</tbody>
</table>
<aside class="notes">
<p>Altair recognizes the following column types and it’s best practice that we specify this when we plot going forward.</p>
<p>Ordinal values imply that there is some natural ordering to the values.</p>
<p>For example, the ratings of a a movie could be on an ordinal scale since a five star rating is better than a single star rating.</p>
<p>In contrast, there is no such natural ordering for nominal values. An example of this would be someone’s eye colour, their country location or the university they attended.</p>
<p>Anything numeric is considered a <code>quantitative</code> variable and <code>time</code> or <code>date</code> values are considered as <code>temporal</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="b48d429b" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a>chart3 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_circle().encode(</span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span><span class="st">'sugars:Q'</span>,  <span class="co"># set the sugars column as quantitative</span></span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span><span class="st">'rating:Q'</span>   <span class="co"># set the rating column as quantitative</span></span>
<span id="cb5-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Scatter plot of cereal rating vs sugar content"</span>)</span>
<span id="cb5-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a aria-hidden="true" tabindex="-1"></a>chart3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart3.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Let’s practice this.</p>
<p>Maybe we are interested in plotting the rating of cereals vs the amount of sugar they contain from <code>cereal</code> dataframe.</p>
<p>We do this using a scatter plot which uses <code>.mark_circle()</code>. We can assign <code>sugars</code> as the the <code>x</code> variable and <code>ratings</code> as the <code>y</code> variable from the <code>cereal</code> dataframe we have been using.</p>
<p>Here, <code>sugars</code> and <code>rating</code> are both quantitative columns so we specify <code>Q</code> as variable types in our plot.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="variable-types" class="slide level2">
<h2>Variable types</h2>
<div id="e596308f" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a aria-hidden="true" tabindex="-1"></a>chart4 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_circle().encode(</span>
<span id="cb6-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'sugars:Q'</span>), <span class="co"># use alt.X() to map the x-axis</span></span>
<span id="cb6-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'rating:Q'</span>)  <span class="co"># use alt.Y() to map the y-axis</span></span>
<span id="cb6-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Scatter plot of cereal rating vs sugar content"</span>)</span>
<span id="cb6-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a aria-hidden="true" tabindex="-1"></a>chart4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart4.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>So far when plotting with Altair, we have been mapping our <code>x</code> and <code>y</code> in the <code>encode(x=..,y=..)</code> verb.</p>
<p>However, doing so gives us very little control over how exactly we would like to map our x and y values.</p>
<p>In order to have more control, we can map our x and y values using <code>x=alt.X(...)</code> and <code>y=alt.Y(...)</code> respectively.</p>
<p>This gives us a lot more control over the customization of our plot.</p>
<p>You’ll see this coming up.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="histograms" class="slide level2">
<h2>Histograms</h2>
<div id="329ae6d6" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a aria-hidden="true" tabindex="-1"></a>chart5 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb7-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'calories:Q'</span>, <span class="bu">bin</span><span class="op">=</span><span class="va">True</span>), <span class="co"># set x-axis as calories </span></span>
<span id="cb7-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'count():Q'</span>)             <span class="co"># set the y-axis as the occurrence count for each calorie value</span></span>
<span id="cb7-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Histogram plot of cereal calorie content"</span>)</span>
<span id="cb7-5"><a aria-hidden="true" tabindex="-1"></a>chart5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart5.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Another type of plot we can make using Altair is called a <strong>histogram</strong>.</p>
<p>A histogram would be an ideal plot if we were interested in seeing how many cereals in our dataframe have calories within a certain range. A histogram is a <code>bar</code> chart where the height of each bar shows the frequency of something occurring. When applied to quantitative data, it groups the values into <strong>ranges</strong>, and the height of each bar shows the frequency of each range.</p>
<p>We can generate a histogram plot of the <code>calories</code> values in the cereal dataframe, which is quantitative. This will enable us to see the various values of calories and how many times they occur.</p>
<p>To make a histogram, we use <code>mark_bar()</code>.</p>
<p>In the <code>encode()</code> verb, we specify the x-axis as <code>calories</code> and use the argument <code>bin=True</code>. We assign the y-axis as <code>count():Q</code> to get the number of cereals that have values within each of the ranges.</p>
<p>This is the same <code>count()</code> argument we use in Module 1 when we made bar charts.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="bins" class="slide level2">
<h2>Bins</h2>
<div id="be8c2c98" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a>chart6 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'calories:Q'</span>, <span class="bu">bin</span><span class="op">=</span>alt.Bin(maxbins<span class="op">=</span><span class="dv">20</span>)), <span class="co"># set max number of bins to 20</span></span>
<span id="cb8-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'count():Q'</span>)</span>
<span id="cb8-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Histogram of cereal calorie content with bins = 20"</span>)</span>
<span id="cb8-5"><a aria-hidden="true" tabindex="-1"></a>chart6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart6.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>We have the ability to change the number of bars (bins) in our histogram by using the <code>bin</code> argument and the <code>alt.Bin()</code> verb.</p>
<p>Within <code>alt.Bin()</code>, we can specify <code>maxbins</code> which is the maximum allowed number of bins in our plot.</p>
<p>This may be useful when viewing a dataset with lots of different values.</p>
<p>Having control over the number of bins in a histogram can help to make visualization easier to extract insights from.</p>
<p>Here, we set the number of max bins in the plot to <code>20</code> by setting <code>bin=alt.Bin(maxbins=20)</code> inside <code>alt.X()</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">


<img data-src="../../../static/module2/chart6.png" style="width:70.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>When plotting with Altair, the <code>x</code> and <code>y</code> axis are labelled with the default column names.</p>
<p>This may not always be ideal since column names may not always be informative. In this plot, the x axis label <code>calories (binned)</code> is a little messy.</p>
<p>Luckily Altair allows us to customize our axis labels.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="5642f5ba" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a>chart7 <span class="op">=</span> alt.Chart(cereal, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb9-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'calories:Q'</span>, <span class="bu">bin</span><span class="op">=</span>alt.Bin(maxbins<span class="op">=</span><span class="dv">20</span>), title<span class="op">=</span><span class="st">"Calorie Content"</span>), <span class="co"># use alt.X() to label the x-axis</span></span>
<span id="cb9-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'count():Q'</span>, title<span class="op">=</span><span class="st">"Number of Cereals"</span>)                          <span class="co"># use alt.Y() to label the y-axis</span></span>
<span id="cb9-4"><a aria-hidden="true" tabindex="-1"></a>        ).properties(title<span class="op">=</span><span class="st">"Histogram plot of cereal calorie content"</span>)</span>
<span id="cb9-5"><a aria-hidden="true" tabindex="-1"></a>chart7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart7.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>We can change these axis labels using the <code>title=""</code> argument within the respective <code>alt.X()</code> and <code>alt.Y()</code> verbs that we talked about earlier.</p>
<p>This is a big help for the clarity of our analysis.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="03ae7743" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a aria-hidden="true" tabindex="-1"></a>mfr_mean <span class="op">=</span> cereal.groupby(by<span class="op">=</span><span class="st">'mfr'</span>).mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-2"><a aria-hidden="true" tabindex="-1"></a>mfr_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">protein</th>
<th data-quarto-table-cell-role="th">fat</th>
<th data-quarto-table-cell-role="th">sodium</th>
<th data-quarto-table-cell-role="th">fiber</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">shelf</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">cups</th>
<th data-quarto-table-cell-role="th">rating</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">mfr</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">A</td>
<td>4.000000</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>54.850917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G</td>
<td>2.318182</td>
<td>1.363636</td>
<td>200.454545</td>
<td>1.272727</td>
<td>...</td>
<td>2.136364</td>
<td>1.049091</td>
<td>0.875000</td>
<td>34.485852</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">K</td>
<td>2.652174</td>
<td>0.608696</td>
<td>174.782609</td>
<td>2.739130</td>
<td>...</td>
<td>2.347826</td>
<td>1.077826</td>
<td>0.796087</td>
<td>44.038462</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">P</td>
<td>2.444444</td>
<td>0.888889</td>
<td>146.111111</td>
<td>2.777778</td>
<td>...</td>
<td>2.444444</td>
<td>1.064444</td>
<td>0.714444</td>
<td>41.705744</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Q</td>
<td>2.625000</td>
<td>1.750000</td>
<td>92.500000</td>
<td>1.337500</td>
<td>...</td>
<td>2.375000</td>
<td>0.875000</td>
<td>0.823750</td>
<td>42.915990</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">R</td>
<td>2.500000</td>
<td>1.250000</td>
<td>198.125000</td>
<td>1.875000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>0.871250</td>
<td>41.542997</td>
</tr>
</tbody>
</table>

<p>7 rows × 12 columns</p>
</div>
</div>
</div>
<aside class="notes">
<p>In the previous slide deck, we asked the following question regarding our cereal data:</p>
<p><strong><em>Which manufacturer has the highest mean sugar content?</em></strong></p>
<p>A nice way of answering this would be to plot the results using a bar chart!</p>
<p>Before doing this, we need a few more tricks.</p>
<p>We can start using the mean statistics we calculated from the <code>groupby(by='mfr')</code> object from the last section.</p>
<p>Here, we seem to have lost our index column of numbers that we usually have. It also appears that <code>mfr</code> has now moved to the left of the dataframe with its label <code>mfr</code> lower than the other column labels.</p>
<p>This is because when you apply <code>groupby()</code> to a column, the grouping column becomes the new dataframe index.</p>
<p>Although this is a useful feature in many cases, Altair cannot access the index column.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="37ed517c" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a>mfr_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">protein</th>
<th data-quarto-table-cell-role="th">fat</th>
<th data-quarto-table-cell-role="th">sodium</th>
<th data-quarto-table-cell-role="th">fiber</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">shelf</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">cups</th>
<th data-quarto-table-cell-role="th">rating</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">mfr</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">A</td>
<td>4.000000</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>54.850917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">G</td>
<td>2.318182</td>
<td>1.363636</td>
<td>200.454545</td>
<td>1.272727</td>
<td>...</td>
<td>2.136364</td>
<td>1.049091</td>
<td>0.875000</td>
<td>34.485852</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">K</td>
<td>2.652174</td>
<td>0.608696</td>
<td>174.782609</td>
<td>2.739130</td>
<td>...</td>
<td>2.347826</td>
<td>1.077826</td>
<td>0.796087</td>
<td>44.038462</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">P</td>
<td>2.444444</td>
<td>0.888889</td>
<td>146.111111</td>
<td>2.777778</td>
<td>...</td>
<td>2.444444</td>
<td>1.064444</td>
<td>0.714444</td>
<td>41.705744</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Q</td>
<td>2.625000</td>
<td>1.750000</td>
<td>92.500000</td>
<td>1.337500</td>
<td>...</td>
<td>2.375000</td>
<td>0.875000</td>
<td>0.823750</td>
<td>42.915990</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">R</td>
<td>2.500000</td>
<td>1.250000</td>
<td>198.125000</td>
<td>1.875000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>0.871250</td>
<td>41.542997</td>
</tr>
</tbody>
</table>

<p>7 rows × 12 columns</p>
</div>
</div>
</div>
<div id="e0212f49" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a aria-hidden="true" tabindex="-1"></a>mfr_mean <span class="op">=</span> mfr_mean.reset_index()</span>
<span id="cb12-2"><a aria-hidden="true" tabindex="-1"></a>mfr_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mfr</th>
<th data-quarto-table-cell-role="th">protein</th>
<th data-quarto-table-cell-role="th">fat</th>
<th data-quarto-table-cell-role="th">sodium</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">shelf</th>
<th data-quarto-table-cell-role="th">weight</th>
<th data-quarto-table-cell-role="th">cups</th>
<th data-quarto-table-cell-role="th">rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>A</td>
<td>4.000000</td>
<td>1.000000</td>
<td>0.000000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>1.000000</td>
<td>54.850917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>G</td>
<td>2.318182</td>
<td>1.363636</td>
<td>200.454545</td>
<td>...</td>
<td>2.136364</td>
<td>1.049091</td>
<td>0.875000</td>
<td>34.485852</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>K</td>
<td>2.652174</td>
<td>0.608696</td>
<td>174.782609</td>
<td>...</td>
<td>2.347826</td>
<td>1.077826</td>
<td>0.796087</td>
<td>44.038462</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>P</td>
<td>2.444444</td>
<td>0.888889</td>
<td>146.111111</td>
<td>...</td>
<td>2.444444</td>
<td>1.064444</td>
<td>0.714444</td>
<td>41.705744</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Q</td>
<td>2.625000</td>
<td>1.750000</td>
<td>92.500000</td>
<td>...</td>
<td>2.375000</td>
<td>0.875000</td>
<td>0.823750</td>
<td>42.915990</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>R</td>
<td>2.500000</td>
<td>1.250000</td>
<td>198.125000</td>
<td>...</td>
<td>2.000000</td>
<td>1.000000</td>
<td>0.871250</td>
<td>41.542997</td>
</tr>
</tbody>
</table>

<p>7 rows × 13 columns</p>
</div>
</div>
</div>
<aside class="notes">
<p>To deal with this, we use <code>reset_index()</code> which will convert <code>mfr</code> to a regular column again.</p>
<p>We can see that <code>mfr</code> column has now moved right and our index column of integers has returned on the left!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="facf85a4" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a aria-hidden="true" tabindex="-1"></a>chart8 <span class="op">=</span> alt.Chart(mfr_mean, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb13-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'mfr:N'</span>, title<span class="op">=</span><span class="st">"Manufacturer"</span>),</span>
<span id="cb13-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'sugars:Q'</span>, title<span class="op">=</span><span class="st">"Mean sugar content"</span>)</span>
<span id="cb13-4"><a aria-hidden="true" tabindex="-1"></a>         ).properties(title<span class="op">=</span><span class="st">"Bar plot of manufacturers mean sugar content"</span>)</span>
<span id="cb13-5"><a aria-hidden="true" tabindex="-1"></a>chart8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart8.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Now that we have our <code>mfr_mean</code> in the correct format, we can proceed.</p>
<p>Using Altair we can plot the <code>mfr</code> column on the x axis which we’ve identified to contain nominal values and <code>sugars</code> which we agreed was a quantitative value on the y axis. (Also, let’s not forget our title!)</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<p><br> <br></p>
<ol type="1">
<li>Groupby object and calculated the mean</li>
<li>Reset index</li>
<li>Plot using Altair</li>
</ol>
<aside class="notes">
<p>Let’s go through the steps that were needed to make the plot in the previous slide.</p>
<p>First, we created a groupby object and calculated the mean for each column in the resulting dataframe.<br>
Second, since <code>.groupby()</code> made <code>mfr</code> the new index, we had to use <code>reset_index()</code> to make <code>mfr</code> a regular column again. And finally, we generated a bar plot using Altair.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sorting" class="slide level2">
<h2>Sorting</h2>
<div id="88cf9cb1" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a aria-hidden="true" tabindex="-1"></a>chart9 <span class="op">=</span> alt.Chart(mfr_mean, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb14-2"><a aria-hidden="true" tabindex="-1"></a>                   x<span class="op">=</span>alt.X(<span class="st">'mfr:N'</span>, sort<span class="op">=</span><span class="st">"y"</span>, title<span class="op">=</span><span class="st">"Manufacturer"</span>),  <span class="co"># use sort="y" to sort in ascending order</span></span>
<span id="cb14-3"><a aria-hidden="true" tabindex="-1"></a>                   y<span class="op">=</span>alt.Y(<span class="st">'sugars:Q'</span>, title<span class="op">=</span><span class="st">"Mean sugar content"</span>)</span>
<span id="cb14-4"><a aria-hidden="true" tabindex="-1"></a>        ).properties(title<span class="op">=</span><span class="st">"Bar plot of manufacturers mean sugar content in ascending order"</span>)</span>
<span id="cb14-5"><a aria-hidden="true" tabindex="-1"></a>chart9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart9.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>Sometimes sorting a dataframe by quantity helps us obtain insights more easily.</p>
<p>For example, if we sorted the mean sugar content for the manufacturers before generating the previous plot, it would be easier to identify which manufacturer produces cereals with the highest mean sugar content.</p>
<p>Altair allows us to sort a column while plotting.</p>
<p>Sorting can be done on either the x or y axis using the <code>sort=</code> in the <code>alt.X</code> or <code>alt.Y</code> verb.</p>
<p>The sort argument takes in either <code>x</code> or <code>y</code> to specify which axis to sort by.</p>
<p>Here we are sorting in ascending order of which manufacturers have the largest mean sugar content.</p>
<p>This plot shows us immediately that manufacturer <code>P</code> has the highest mean cereal sugar content.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div id="727e4624" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a aria-hidden="true" tabindex="-1"></a>chart10 <span class="op">=</span> alt.Chart(mfr_mean, width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb15-2"><a aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'mfr:N'</span>, sort<span class="op">=</span><span class="st">"-y"</span>, title<span class="op">=</span><span class="st">"Manufacturer"</span>),  <span class="co"># use sort="-y" to sort in descending order</span></span>
<span id="cb15-3"><a aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'sugars:Q'</span>, title<span class="op">=</span><span class="st">"Mean sugar content"</span>)</span>
<span id="cb15-4"><a aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Bar plot of manufacturers mean sugar content sorted in descending order"</span>)</span>
<span id="cb15-5"><a aria-hidden="true" tabindex="-1"></a>chart10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="../../../static/module2/chart10.png" style="width:60.0%" alt="404 image" class="r-stretch"><aside class="notes">
<p>To generate a bar plot of mean calorie content sorted in <code>descending</code> order, we recycle the code from the previous slide.</p>
<p>This time, we add <code>-y</code> in the <code>sort</code> argument to specify that we would like to sort the y variable in descending order.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<p><br><br></p>
<center>
<font size="+3"> If you enjoyed this part of the module and you wish to learn more advanced visualizations using Altair, take a look at our <br> <a href="https://viz-learn.mds.ubc.ca/" target="_blank"><b>Data Visualization</b></a> course </font>
<center>
</center></center></section>
<section id="lets-apply-what-we-learned" class="title-slide slide level1 center">
<h1>Let’s apply what we learned!</h1>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: false,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: true,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: '100%',

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>